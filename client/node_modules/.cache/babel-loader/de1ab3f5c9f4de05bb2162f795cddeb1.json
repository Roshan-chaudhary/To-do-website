{"ast":null,"code":"import _defineProperty from\"/home/roshan/Codeing/* 3. Devops/To-do-website/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/roshan/Codeing/* 3. Devops/To-do-website/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/roshan/Codeing/* 3. Devops/To-do-website/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/roshan/Codeing/* 3. Devops/To-do-website/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/roshan/Codeing/* 3. Devops/To-do-website/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Blog(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),render=_useState4[0],setRender=_useState4[1];var _useState5=useState({title:\"\",des:\"\"}),_useState6=_slicedToArray(_useState5,2),inputs=_useState6[0],setInputs=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),updateId=_useState8[0],setUpdateId=_useState8[1];// State to store the ID of the post being updated\nuseEffect(function(){var getAllUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var getAllData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:8002/usersapi\");case 3:getAllData=_context.sent;setUsers(getAllData.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getAllUsers(){return _ref.apply(this,arguments);};}();getAllUsers();},[render]);var formdata=new FormData();formdata.append(\"title\",inputs.title);formdata.append(\"des\",inputs.des);// Append active status to form data\nvar handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;if(!updateId){_context2.next=8;break;}_context2.next=5;return axios.put(\"http://localhost:8002/users/update/\".concat(updateId),formdata);case 5:alert(\"Post updated successfully!\");_context2.next=11;break;case 8:_context2.next=10;return axios.post(\"http://localhost:8002/users\",formdata);case 10:alert(\"Post created successfully!\");case 11:setRender(!render);// Toggle render to refresh user data\nsetInputs({title:\"\",des:\"\"});setUpdateId(null);// Reset updateId after operation\n_context2.next=20;break;case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);alert(_context2.t0);case 20:case\"end\":return _context2.stop();}}},_callee2,null,[[1,16]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"http://localhost:8002/users/\".concat(id));case 3:setRender(!render);// Refresh user data after deletion\n_context3.next=10;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);alert(_context3.t0);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function handleDelete(_x2){return _ref3.apply(this,arguments);};}();var handleUpdate=function handleUpdate(id){var updateUser=users.find(function(user){return user._id===id;});// Set active to true if it's falsy\nsetInputs({title:updateUser.title,des:updateUser.des});// Update the image state as well\nsetUpdateId(id);// Set the ID of the post being updated\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center text-3xl font-bold my-10  \",children:\"To-Do App\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",className:\"form-label\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputs.title,onChange:function onChange(e){return setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},e.target.name,e.target.value)));},name:\"title\",className:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",className:\"form-label  \",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",value:inputs.des,onChange:function onChange(e){return setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},e.target.name,e.target.value)));},name:\"des\",className:\"form-control\",id:\"exampleInputPassword1\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:updateId?'Update':'Submit'})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users&&users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.date}),/*#__PURE__*/_jsx(\"td\",{children:user.title}),/*#__PURE__*/_jsx(\"td\",{children:user.des}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return handleDelete(user._id);},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return handleUpdate(user._id);},children:\"Update\"})]})]},user._id);})})]})})]})]});}export default Blog;","map":{"version":3,"sources":["/home/roshan/Codeing/* 3. Devops/To-do-website/client/src/components/Blog.jsx"],"names":["React","useEffect","useState","axios","Blog","users","setUsers","render","setRender","title","des","inputs","setInputs","updateId","setUpdateId","getAllUsers","get","getAllData","data","console","log","formdata","FormData","append","handleSubmit","e","preventDefault","put","alert","post","handleDelete","id","delete","handleUpdate","updateUser","find","user","_id","target","name","value","map","date"],"mappings":"2rBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,QAASC,CAAAA,IAAT,EAAgB,CACd,cAA0BF,QAAQ,CAAC,EAAD,CAAlC,wCAAOG,KAAP,eAAcC,QAAd,eACA,eAA4BJ,QAAQ,CAAC,KAAD,CAApC,yCAAOK,MAAP,eAAeC,SAAf,eACA,eAA4BN,QAAQ,CAAC,CACnCO,KAAK,CAAE,EAD4B,CAEnCC,GAAG,CAAE,EAF8B,CAAD,CAApC,yCAAOC,MAAP,eAAeC,SAAf,eAMA,eAAgCV,QAAQ,CAAC,IAAD,CAAxC,yCAAOW,QAAP,eAAiBC,WAAjB,eAAgD;AAEhDb,SAAS,CAAC,UAAM,CACd,GAAMc,CAAAA,WAAW,0FAAG,wLAESZ,CAAAA,KAAK,CAACa,GAAN,CAAU,gCAAV,CAFT,QAEVC,UAFU,eAGhBX,QAAQ,CAACW,UAAU,CAACC,IAAZ,CAAR,CAHgB,+EAKhBC,OAAO,CAACC,GAAR,cALgB,oEAAH,kBAAXL,CAAAA,WAAW,0CAAjB,CAQAA,WAAW,GACZ,CAVQ,CAUN,CAACR,MAAD,CAVM,CAAT,CAYA,GAAMc,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAD,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBZ,MAAM,CAACF,KAAhC,EACAY,QAAQ,CAACE,MAAT,CAAgB,KAAhB,CAAuBZ,MAAM,CAACD,GAA9B,EAEC;AAED,GAAMc,CAAAA,YAAY,2FAAG,kBAAOC,CAAP,sHACnBA,CAAC,CAACC,cAAF,GADmB,qBAGbb,QAHa,iDAKTV,CAAAA,KAAK,CAACwB,GAAN,8CAAgDd,QAAhD,EAA4DQ,QAA5D,CALS,QAMfO,KAAK,CAAC,4BAAD,CAAL,CANe,uDASTzB,CAAAA,KAAK,CAAC0B,IAAN,CAAW,6BAAX,CAA0CR,QAA1C,CATS,SAUfO,KAAK,CAAC,4BAAD,CAAL,CAVe,QAYjBpB,SAAS,CAAC,CAACD,MAAF,CAAT,CAAoB;AACpBK,SAAS,CAAC,CACRH,KAAK,CAAE,EADC,CAERC,GAAG,CAAE,EAFG,CAAD,CAAT,CAMAI,WAAW,CAAC,IAAD,CAAX,CAAmB;AAnBF,qFAqBjBK,OAAO,CAACC,GAAR,eACAQ,KAAK,cAAL,CAtBiB,uEAAH,kBAAZJ,CAAAA,YAAY,6CAAlB,CA2BA,GAAMM,CAAAA,YAAY,2FAAG,kBAAOC,EAAP,8JAEX5B,CAAAA,KAAK,CAAC6B,MAAN,uCAA4CD,EAA5C,EAFW,QAGjBvB,SAAS,CAAC,CAACD,MAAF,CAAT,CAAoB;AAHH,mFAKjBY,OAAO,CAACC,GAAR,eACAQ,KAAK,cAAL,CANiB,sEAAH,kBAAZE,CAAAA,YAAY,8CAAlB,CAUA,GAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACF,EAAD,CAAQ,CAC3B,GAAMG,CAAAA,UAAU,CAAG7B,KAAK,CAAC8B,IAAN,CAAW,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,GAAL,GAAaN,EAAjB,EAAf,CAAnB,CACA;AACAnB,SAAS,CAAC,CACRH,KAAK,CAAEyB,UAAU,CAACzB,KADV,CAERC,GAAG,CAAEwB,UAAU,CAACxB,GAFR,CAAD,CAAT,CAKD;AACCI,WAAW,CAACiB,EAAD,CAAX,CAAiB;AAClB,CAVD,CAcA,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,WAAI,SAAS,CAAC,wCAAd,uBADF,cAEE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,UAAf,uBACE,cAAM,QAAQ,CAAEP,YAAhB,CAA8B,OAAO,CAAC,qBAAtC,wBACE,aAAK,SAAS,CAAC,MAAf,wBACE,cAAO,OAAO,CAAC,oBAAf,CAAoC,SAAS,CAAC,YAA9C,mBADF,cAEE,cAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,CAAEb,MAAM,CAACF,KAAjC,CAAwC,QAAQ,CAAE,kBAACgB,CAAD,QAAOb,CAAAA,SAAS,gCAAMD,MAAN,wBAAec,CAAC,CAACa,MAAF,CAASC,IAAxB,CAA+Bd,CAAC,CAACa,MAAF,CAASE,KAAxC,GAAhB,EAAlD,CAAoH,IAAI,CAAC,OAAzH,CAAiI,SAAS,CAAC,cAA3I,CAA0J,EAAE,CAAC,oBAA7J,CAAkL,mBAAiB,WAAnM,EAFF,GADF,cAKE,aAAK,SAAS,CAAC,MAAf,wBACE,cAAO,OAAO,CAAC,uBAAf,CAAuC,SAAS,CAAC,cAAjD,yBADF,cAEE,iBAAU,IAAI,CAAC,MAAf,CAAsB,KAAK,CAAE7B,MAAM,CAACD,GAApC,CAAyC,QAAQ,CAAE,kBAACe,CAAD,QAAOb,CAAAA,SAAS,gCAAMD,MAAN,wBAAec,CAAC,CAACa,MAAF,CAASC,IAAxB,CAA+Bd,CAAC,CAACa,MAAF,CAASE,KAAxC,GAAhB,EAAnD,CAAqH,IAAI,CAAC,KAA1H,CAAgI,SAAS,CAAC,cAA1I,CAAyJ,EAAE,CAAC,uBAA5J,EAFF,GALF,cAWE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,UAAmD3B,QAAQ,CAAG,QAAH,CAAc,QAAzE,EAXF,GADF,EADF,cAiBE,YAAK,SAAS,CAAC,UAAf,uBACE,eAAO,SAAS,CAAC,OAAjB,wBACE,oCACE,mCACE,WAAI,KAAK,CAAC,KAAV,kBADF,cAEE,WAAI,KAAK,CAAC,KAAV,mBAFF,cAGE,WAAI,KAAK,CAAC,KAAV,yBAHF,cAIE,WAAI,KAAK,CAAC,KAAV,qBAJF,GADF,EADF,cASE,uBACGR,KAAK,EAAIA,KAAK,CAACoC,GAAN,CAAU,SAACL,IAAD,qBAClB,mCACE,oBAAKA,IAAI,CAACM,IAAV,EADF,cAEE,oBAAKN,IAAI,CAAC3B,KAAV,EAFF,cAGE,oBAAK2B,IAAI,CAAC1B,GAAV,EAHF,cAKE,mCACE,eAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAE,yBAAMoB,CAAAA,YAAY,CAACM,IAAI,CAACC,GAAN,CAAlB,EAA5C,oBADF,cAEE,eAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAE,yBAAMJ,CAAAA,YAAY,CAACG,IAAI,CAACC,GAAN,CAAlB,EAA7C,oBAFF,GALF,GAASD,IAAI,CAACC,GAAd,CADkB,EAAV,CADZ,EATF,GADF,EAjBF,GAFF,GADF,CAiDD,CAED,cAAejC,CAAAA,IAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nfunction Blog() {\n  const [users, setUsers] = useState([]);\n  const [render, setRender] = useState(false);\n  const [inputs, setInputs] = useState({\n    title: \"\",\n    des: \"\",\n    \n  });\n  \n  const [updateId, setUpdateId] = useState(null); // State to store the ID of the post being updated\n\n  useEffect(() => {\n    const getAllUsers = async () => {\n      try {\n        const getAllData = await axios.get(\"http://localhost:8002/usersapi\");\n        setUsers(getAllData.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getAllUsers();\n  }, [render]);\n\n  const formdata = new FormData();\n  formdata.append(\"title\", inputs.title);\n  formdata.append(\"des\", inputs.des);\n  \n   // Append active status to form data\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      if (updateId) {\n        // If updateId exists, it's an update operation\n        await axios.put(`http://localhost:8002/users/update/${updateId}`, formdata);\n        alert(\"Post updated successfully!\");\n      } else {\n        // If updateId is null, it's a post operation\n        await axios.post(\"http://localhost:8002/users\", formdata);\n        alert(\"Post created successfully!\");\n      }\n      setRender(!render); // Toggle render to refresh user data\n      setInputs({\n        title: \"\",\n        des: \"\",\n        \n      });\n      \n      setUpdateId(null); // Reset updateId after operation\n    } catch (error) {\n      console.log(error);\n      alert(error);\n    }\n  };\n\n  \n  const handleDelete = async (id) => {\n    try {\n      await axios.delete(`http://localhost:8002/users/${id}`);\n      setRender(!render); // Refresh user data after deletion\n    } catch (error) {\n      console.log(error);\n      alert(error);\n    }\n  };\n\n  const handleUpdate = (id) => {\n    const updateUser = users.find(user => user._id === id);\n    // Set active to true if it's falsy\n    setInputs({\n      title: updateUser.title,\n      des: updateUser.des,\n      \n    });\n   // Update the image state as well\n    setUpdateId(id); // Set the ID of the post being updated\n  };\n\n  \n\n  return (\n    <div className=\"container\">\n      <h1 className='text-center text-3xl font-bold my-10  '   >To-Do App</h1>\n      <div className=\"row\">\n        <div className=\"col-md-6\">\n          <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\n            <div className=\"mb-3\">\n              <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">Title</label>\n              <input type=\"text\" value={inputs.title} onChange={(e) => setInputs({ ...inputs, [e.target.name]: e.target.value })} name=\"title\" className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" />\n            </div>\n            <div className=\"mb-3\">\n              <label htmlFor=\"exampleInputPassword1\" className=\"form-label  \">Description</label>\n              <textarea type=\"text\" value={inputs.des} onChange={(e) => setInputs({ ...inputs, [e.target.name]: e.target.value })} name='des' className=\"form-control\" id=\"exampleInputPassword1\" />\n            </div>\n            \n            \n            <button type=\"submit\" className=\"btn btn-primary\">{updateId ? 'Update' : 'Submit'}</button>\n          </form>\n        </div>\n    \n        <div className=\"col-md-6\">\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th scope=\"col\">Date</th>\n                <th scope=\"col\">Title</th>\n                <th scope=\"col\">Description</th>\n                <th scope=\"col\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users && users.map((user) => (\n                <tr key={user._id}>\n                  <td>{user.date}</td>\n                  <td>{user.title}</td>\n                  <td>{user.des}</td>\n                  \n                  <td>\n                    <button className=\"btn btn-danger\" onClick={() => handleDelete(user._id)}>Delete</button>\n                    <button className=\"btn btn-primary\" onClick={() => handleUpdate(user._id)}>Update</button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Blog;\n\n"]},"metadata":{},"sourceType":"module"}